<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apple SFX Generator</title>
    <script src="https://unpkg.com/tone@15.1.22/build/Tone.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f7;
        }
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        button {
            background: #007AFF;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        button:hover {
            background: #0051D0;
            transform: translateY(-1px);
        }
        button:active {
            transform: translateY(0);
        }
        .mixed-button {
            background: #34C759 !important;
        }
        .mixed-button:hover {
            background: #28A745 !important;
        }
        .instrument-selector, .custom-sound, .mixed-instruments {
            margin-top: 30px;
            padding: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        input, select {
            padding: 8px 12px;
            border: 1px solid #ccc;
            border-radius: 6px;
            margin: 5px;
        }
    </style>
</head>
<body>
    <h1>üîä Apple SFX Generator</h1>
    <p>Click buttons to generate Apple-style UI sound effects</p>

    <div class="instrument-selector">
        <h3>üéπ Instrument</h3>
        <select id="instrumentSelect">
            <option value="sine">Sine Wave (Pure, Clean)</option>
            <option value="triangle">Triangle Wave (Warm, Soft)</option>
            <option value="sawtooth">Sawtooth (Bright, Electronic)</option>
            <option value="square">Square Wave (Digital, Retro)</option>
            <option value="fmsine">FM Synthesis (Bell-like)</option>
            <option value="pluck">Pluck (String Attack)</option>
            <option value="piano">üéπ Piano (Realistic Keys)</option>
            <option value="marimba">üî® Marimba (Wooden Mallets)</option>
            <option value="metalphone">üîî Metalphone (Bell Chimes)</option>
            <option value="harp">ü™à Harp (String Plucks)</option>
        </select>
    </div>

    <div class="instrument-selector">
        <h3>üéõÔ∏è Analog Effects</h3>
        <select id="effectsSelect">
            <option value="none">Clean (No Effects)</option>
            <option value="vintage">Vintage Warmth (Chorus + Saturation)</option>
            <option value="analog">Analog Hardware (Compressor + Chorus)</option>
            <option value="lofi">Lo-Fi Character (BitCrush + Filter)</option>
            <option value="tube">Tube Amp (Distortion + Warmth)</option>
            <option value="spacey">Spacey (Phaser + Delay)</option>
            <option value="underwater">Underwater (Filter Sweep + Chorus)</option>
        </select>
    </div>

    <div class="controls">
        <button onclick="sfx.notificationChime()">Notification Chime</button>
        <button onclick="sfx.successSound()">Success Sound</button>
        <button onclick="sfx.buttonClick()">Button Click</button>
        <button onclick="sfx.errorSound()">Error Sound</button>
        <button onclick="sfx.swipeSound()">Swipe Sound</button>
        <button onclick="sfx.modalAppear()">Modal Appear</button>
    </div>

    <div class="mixed-instruments">
        <h3>üí∞ Mixed Instrument Effects</h3>
        <p>Layered sounds combining multiple synthesizers</p>
        <div class="controls">
            <button class="mixed-button" onclick="sfx.cashOutSound()">üí∞ Cash Out</button>
            <button class="mixed-button" onclick="sfx.levelUpSound()">‚¨ÜÔ∏è Level Up</button>
            <button class="mixed-button" onclick="sfx.magicSparkSound()">‚ú® Magic Spark</button>
            <button class="mixed-button" onclick="sfx.coinDropSound()">ü™ô Coin Drop</button>
            <button class="mixed-button" onclick="sfx.windChimeSound()">üéê Wind Chime</button>
            <button class="mixed-button" onclick="sfx.treasureOpenSound()">üè¥‚Äç‚ò†Ô∏è Treasure Open</button>
            <button class="mixed-button" onclick="sfx.crystalResonanceSound()">üíé Crystal Resonance</button>
            <button class="mixed-button" onclick="sfx.gentleRainSound()">üåßÔ∏è Gentle Rain</button>
        </div>
    </div>

    <div class="custom-sound">
        <h3>Custom Sound Generator</h3>
        <select id="noteSelect">
            <option value="C4">C4</option>
            <option value="D4">D4</option>
            <option value="E4">E4</option>
            <option value="F4">F4</option>
            <option value="G4">G4</option>
            <option value="A4">A4</option>
            <option value="B4">B4</option>
            <option value="C5">C5</option>
            <option value="D5">D5</option>
            <option value="E5">E5</option>
            <option value="F5">F5</option>
            <option value="G5">G5</option>
            <option value="A5">A5</option>
            <option value="B5">B5</option>
            <option value="C6">C6</option>
        </select>
        <input type="range" id="durationSlider" min="0.05" max="1" step="0.05" value="0.1">
        <span id="durationValue">0.1s</span>
        <button onclick="playCustomSound()">Play Custom</button>
    </div>

    <script>
        class AppleSFXGenerator {
            constructor() {
                this.reverb = null;
                this.effectsChain = null;
                this.synth = null;
                this.pluckSynth = null;
                this.metalphoneSynth = null;
                this.marimbaSync = null;
                this.harpSynth = null;
                this.initialized = false;
                this.currentInstrument = 'sine';
                this.currentEffect = 'none';
            }

            async init() {
                if (this.initialized) return;
                
                await Tone.start();
                
                this.reverb = new Tone.Reverb({
                    decay: 1.5,
                    wet: 0.3
                });
                
                this.createEffectsChain();
                this.createSynth();
                this.createMixedSynths();
                await this.reverb.generate();
                this.initialized = true;
            }

            createSynth() {
                if (this.synth) {
                    this.synth.dispose();
                }

                const instrument = this.currentInstrument;
                
                if (instrument === 'pluck') {
                    this.synth = new Tone.PluckSynth({
                        attackNoise: 1,
                        dampening: 4000,
                        resonance: 0.7
                    }).connect(this.effectsChain);
                } else if (instrument === 'fmsine') {
                    this.synth = new Tone.FMSynth({
                        harmonicity: 3,
                        modulationIndex: 10,
                        oscillator: { type: 'sine' },
                        envelope: { attack: 0.01, decay: 0.1, sustain: 0.3, release: 0.8 },
                        modulation: { type: 'sine' },
                        modulationEnvelope: { attack: 0.006, decay: 0.2, sustain: 0.1, release: 0.8 }
                    }).connect(this.effectsChain);
                } else if (instrument === 'piano') {
                    this.synth = new Tone.Synth({
                        oscillator: { type: 'triangle' },
                        envelope: { attack: 0.001, decay: 0.3, sustain: 0.1, release: 1.2 }
                    }).connect(this.effectsChain);
                } else if (instrument === 'marimba') {
                    this.synth = new Tone.FMSynth({
                        harmonicity: 2,
                        modulationIndex: 20,
                        oscillator: { type: 'sine' },
                        envelope: { attack: 0.001, decay: 0.2, sustain: 0.1, release: 1.0 },
                        modulation: { type: 'sine' },
                        modulationEnvelope: { attack: 0.001, decay: 0.3, sustain: 0, release: 0.3 }
                    }).connect(this.effectsChain);
                } else if (instrument === 'metalphone') {
                    this.synth = new Tone.FMSynth({
                        harmonicity: 8,
                        modulationIndex: 12,
                        oscillator: { type: 'sine' },
                        envelope: { attack: 0.001, decay: 0.5, sustain: 0.2, release: 2.0 },
                        modulation: { type: 'sine' },
                        modulationEnvelope: { attack: 0.001, decay: 0.1, sustain: 0, release: 0.1 }
                    }).connect(this.effectsChain);
                } else if (instrument === 'harp') {
                    this.synth = new Tone.PluckSynth({
                        attackNoise: 0.2,
                        dampening: 6000,
                        resonance: 0.9
                    }).connect(this.effectsChain);
                } else {
                    this.synth = new Tone.Synth({
                        oscillator: { type: instrument },
                        envelope: {
                            attack: 0.005,
                            decay: 0.1,
                            sustain: 0.3,
                            release: 0.8
                        }
                    }).connect(this.effectsChain);
                }
            }

            async changeInstrument(instrument) {
                this.currentInstrument = instrument;
                if (this.initialized) {
                    this.createSynth();
                }
            }

            createEffectsChain() {
                if (this.effectsChain) {
                    this.effectsChain.dispose();
                }

                const effect = this.currentEffect;
                
                if (effect === 'vintage') {
                    // Chorus + Saturation for vintage warmth
                    const chorus = new Tone.Chorus(4, 2.5, 0.5);
                    const distortion = new Tone.Distortion(0.2);
                    this.effectsChain = chorus.chain(distortion, this.reverb).toDestination();
                } else if (effect === 'analog') {
                    // Compressor + Chorus for hardware feel
                    const compressor = new Tone.Compressor(-30, 3);
                    const chorus = new Tone.Chorus(2, 3.5, 0.3);
                    this.effectsChain = compressor.chain(chorus, this.reverb).toDestination();
                } else if (effect === 'lofi') {
                    // BitCrush + Filter for lo-fi character
                    const bitCrush = new Tone.BitCrusher(6);
                    const filter = new Tone.Filter(2000, "lowpass");
                    this.effectsChain = bitCrush.chain(filter, this.reverb).toDestination();
                } else if (effect === 'tube') {
                    // Distortion + Warmth for tube amp
                    const distortion = new Tone.Distortion(0.4);
                    const filter = new Tone.Filter(3000, "lowpass");
                    this.effectsChain = distortion.chain(filter, this.reverb).toDestination();
                } else if (effect === 'spacey') {
                    // Phaser + Delay for spacey effects
                    const phaser = new Tone.Phaser(0.5, 3, 350);
                    const delay = new Tone.Delay(0.2);
                    this.effectsChain = phaser.chain(delay, this.reverb).toDestination();
                } else if (effect === 'underwater') {
                    // Filter Sweep + Chorus for underwater feel
                    const autoFilter = new Tone.AutoFilter(0.3, 200, 4);
                    const chorus = new Tone.Chorus(6, 2, 0.8);
                    this.effectsChain = autoFilter.chain(chorus, this.reverb).toDestination();
                    autoFilter.start();
                } else {
                    // Clean - no effects, just reverb to destination
                    this.effectsChain = this.reverb;
                    this.effectsChain.toDestination();
                }
            }

            async changeEffect(effect) {
                this.currentEffect = effect;
                if (this.initialized) {
                    this.createEffectsChain();
                    this.createSynth();
                    this.createMixedSynths();
                }
            }

            createMixedSynths() {
                // Dispose existing synths
                if (this.pluckSynth) this.pluckSynth.dispose();
                if (this.metalphoneSynth) this.metalphoneSynth.dispose();
                if (this.marimbaSync) this.marimbaSync.dispose();
                if (this.harpSynth) this.harpSynth.dispose();

                // Create dedicated synths for mixing
                this.pluckSynth = new Tone.PluckSynth({
                    attackNoise: 1,
                    dampening: 4000,
                    resonance: 0.7
                }).connect(this.effectsChain);

                this.metalphoneSynth = new Tone.FMSynth({
                    harmonicity: 8,
                    modulationIndex: 12,
                    oscillator: { type: 'sine' },
                    envelope: { attack: 0.001, decay: 0.5, sustain: 0.2, release: 2.0 },
                    modulation: { type: 'sine' },
                    modulationEnvelope: { attack: 0.001, decay: 0.1, sustain: 0, release: 0.1 }
                }).connect(this.effectsChain);

                this.marimbaSync = new Tone.FMSynth({
                    harmonicity: 2,
                    modulationIndex: 20,
                    oscillator: { type: 'sine' },
                    envelope: { attack: 0.001, decay: 0.2, sustain: 0.1, release: 1.0 },
                    modulation: { type: 'sine' },
                    modulationEnvelope: { attack: 0.001, decay: 0.3, sustain: 0, release: 0.3 }
                }).connect(this.effectsChain);

                this.harpSynth = new Tone.PluckSynth({
                    attackNoise: 0.2,
                    dampening: 6000,
                    resonance: 0.9
                }).connect(this.effectsChain);
            }

            async ensureInit() {
                if (!this.initialized) await this.init();
            }

            async notificationChime() {
                await this.ensureInit();
                const now = Tone.now();
                this.synth.triggerAttackRelease('G5', '0.15', now);
                this.synth.triggerAttackRelease('C6', '0.2', now + 0.1);
            }

            async successSound() {
                await this.ensureInit();
                const now = Tone.now();
                this.synth.triggerAttackRelease('C5', '0.1', now);
                this.synth.triggerAttackRelease('E5', '0.1', now + 0.05);
                this.synth.triggerAttackRelease('G5', '0.15', now + 0.1);
            }

            async buttonClick() {
                await this.ensureInit();
                this.synth.triggerAttackRelease('C6', '0.05');
            }

            async errorSound() {
                await this.ensureInit();
                const now = Tone.now();
                this.synth.triggerAttackRelease('F4', '0.1', now);
                this.synth.triggerAttackRelease('D4', '0.15', now + 0.05);
            }

            async swipeSound() {
                await this.ensureInit();
                const now = Tone.now();
                this.synth.triggerAttackRelease('A4', '0.08', now);
                this.synth.triggerAttackRelease('C5', '0.06', now + 0.04);
            }

            async modalAppear() {
                await this.ensureInit();
                const now = Tone.now();
                this.synth.triggerAttackRelease('G4', '0.12', now);
                this.synth.triggerAttackRelease('D5', '0.18', now + 0.08);
            }

            async customSound(note, duration = '0.1') {
                await this.ensureInit();
                this.synth.triggerAttackRelease(note, duration);
            }

            // Mixed instrument sounds
            async cashOutSound() {
                await this.ensureInit();
                const now = Tone.now();
                
                // Initial pluck for that satisfying "cha-ching" attack
                this.pluckSynth.triggerAttackRelease('G5', '0.1', now);
                
                // Layered metalphone with waning effect (slides down but stays positive)
                this.metalphoneSynth.triggerAttackRelease('G5', '0.8', now + 0.05);
                this.metalphoneSynth.triggerAttackRelease('D5', '0.6', now + 0.15);
                this.metalphoneSynth.triggerAttackRelease('A4', '0.4', now + 0.3);
                
                // Additional harmonic for richness
                this.metalphoneSynth.triggerAttackRelease('B4', '0.5', now + 0.2);
            }

            async levelUpSound() {
                await this.ensureInit();
                const now = Tone.now();
                
                // Ascending pluck sequence
                this.pluckSynth.triggerAttackRelease('C5', '0.08', now);
                this.pluckSynth.triggerAttackRelease('E5', '0.08', now + 0.06);
                this.pluckSynth.triggerAttackRelease('G5', '0.08', now + 0.12);
                
                // Sustained metalphone harmony
                this.metalphoneSynth.triggerAttackRelease('C6', '0.6', now + 0.15);
                this.metalphoneSynth.triggerAttackRelease('E6', '0.4', now + 0.2);
            }

            async magicSparkSound() {
                await this.ensureInit();
                const now = Tone.now();
                
                // Quick pluck arpeggios
                this.pluckSynth.triggerAttackRelease('C6', '0.05', now);
                this.pluckSynth.triggerAttackRelease('E6', '0.05', now + 0.03);
                this.pluckSynth.triggerAttackRelease('G6', '0.05', now + 0.06);
                
                // Shimmering metalphone notes
                this.metalphoneSynth.triggerAttackRelease('C7', '0.3', now + 0.05);
                this.metalphoneSynth.triggerAttackRelease('G6', '0.4', now + 0.1);
            }

            async coinDropSound() {
                await this.ensureInit();
                const now = Tone.now();
                
                // High pluck for the "clink"
                this.pluckSynth.triggerAttackRelease('C6', '0.06', now);
                
                // Descending metalphone notes for the "drop" bounce effect
                this.metalphoneSynth.triggerAttackRelease('A5', '0.15', now + 0.05);
                this.metalphoneSynth.triggerAttackRelease('F5', '0.12', now + 0.12);
                this.metalphoneSynth.triggerAttackRelease('D5', '0.1', now + 0.18);
            }

            async windChimeSound() {
                await this.ensureInit();
                const now = Tone.now();
                
                // Metalphone for bell tones + Harp for gentle plucks
                this.metalphoneSynth.triggerAttackRelease('C6', '1.2', now);
                this.metalphoneSynth.triggerAttackRelease('E6', '1.0', now + 0.1);
                this.metalphoneSynth.triggerAttackRelease('G6', '0.8', now + 0.2);
                
                this.harpSynth.triggerAttackRelease('C5', '0.3', now + 0.05);
                this.harpSynth.triggerAttackRelease('F5', '0.3', now + 0.15);
                this.harpSynth.triggerAttackRelease('A5', '0.3', now + 0.25);
            }

            async treasureOpenSound() {
                await this.ensureInit();
                const now = Tone.now();
                
                // Marimba for wooden chest creak + Metalphone for treasure sparkle
                this.marimbaSync.triggerAttackRelease('F3', '0.2', now);
                this.marimbaSync.triggerAttackRelease('C4', '0.15', now + 0.1);
                
                // Treasure sparkle cascade
                this.metalphoneSynth.triggerAttackRelease('C6', '0.4', now + 0.2);
                this.metalphoneSynth.triggerAttackRelease('E6', '0.4', now + 0.25);
                this.metalphoneSynth.triggerAttackRelease('G6', '0.4', now + 0.3);
                this.metalphoneSynth.triggerAttackRelease('C7', '0.6', now + 0.35);
            }

            async crystalResonanceSound() {
                await this.ensureInit();
                const now = Tone.now();
                
                // Pure metalphone resonance with harmonic overtones
                this.metalphoneSynth.triggerAttackRelease('C5', '1.5', now);
                this.metalphoneSynth.triggerAttackRelease('G5', '1.2', now + 0.1);
                this.metalphoneSynth.triggerAttackRelease('E6', '1.0', now + 0.2);
                this.metalphoneSynth.triggerAttackRelease('C6', '0.8', now + 0.3);
                
                // Harp overtones for ethereal quality
                this.harpSynth.triggerAttackRelease('C4', '0.6', now + 0.15);
                this.harpSynth.triggerAttackRelease('G4', '0.6', now + 0.25);
            }

            async gentleRainSound() {
                await this.ensureInit();
                const now = Tone.now();
                
                // Multiple quick plucks for raindrops + Marimba for distant thunder
                this.pluckSynth.triggerAttackRelease('A5', '0.03', now);
                this.pluckSynth.triggerAttackRelease('F5', '0.03', now + 0.02);
                this.pluckSynth.triggerAttackRelease('D5', '0.03', now + 0.04);
                this.pluckSynth.triggerAttackRelease('G5', '0.03', now + 0.06);
                this.pluckSynth.triggerAttackRelease('C5', '0.03', now + 0.08);
                
                // Gentle marimba roll
                this.marimbaSync.triggerAttackRelease('F3', '0.4', now + 0.1);
                this.marimbaSync.triggerAttackRelease('A3', '0.3', now + 0.2);
            }
        }

        const sfx = new AppleSFXGenerator();

        // Instrument selector
        const instrumentSelect = document.getElementById('instrumentSelect');
        instrumentSelect.addEventListener('change', async () => {
            await sfx.changeInstrument(instrumentSelect.value);
        });

        // Effects selector
        const effectsSelect = document.getElementById('effectsSelect');
        effectsSelect.addEventListener('change', async () => {
            await sfx.changeEffect(effectsSelect.value);
        });

        // Custom sound controls
        const durationSlider = document.getElementById('durationSlider');
        const durationValue = document.getElementById('durationValue');
        
        durationSlider.addEventListener('input', () => {
            durationValue.textContent = durationSlider.value + 's';
        });

        async function playCustomSound() {
            const note = document.getElementById('noteSelect').value;
            const duration = durationSlider.value;
            await sfx.customSound(note, duration);
        }
    </script>
</body>
</html>